# Ruleset configuration for cuioss repositories
# Used by setup-rulesets.sh to create consistent branch protection

organization: cui-oss

# GitHub App allowed to bypass branch protection
bypass_actor:
  name: cuioss-release-bot
  type: app  # app, team, or user

# Ruleset settings
ruleset:
  name: main-branch-protection
  target: branch
  branch_pattern: main
  enforcement: active  # active, disabled, evaluate

  rules:
    require_pull_request:
      enabled: true
      required_approving_review_count: 1
      dismiss_stale_reviews_on_push: true
      require_last_push_approval: false

    require_status_checks:
      enabled: true
      strict_required_status_checks_policy: false
      required_checks:
        - build

    block_force_pushes:
      enabled: true

    prevent_deletion:
      enabled: true

# Repositories to apply ruleset to
repositories:
  - OAuth-Sheriff
  - cui-java-parent
  - cui-java-tools
  - cui-test-generator
  - cui-test-juli-logger
  - cui-test-value-objects
  # Add more repos as needed
